<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Second Ajax Project</title>
</head>
<body>

        <button id="button">Get Texts</button>
        <br>
        <div id="text"></div>

        <script>
                document.getElementById("button").addEventListener("click", loadText);


                function loadText(){
                        // console.log("button clicked");

                        //  Create XHR object
                        var xhr = new XMLHttpRequest();
                        // console.log(xhr);

                        // OPEN = type, url /file, async
                        xhr.open("GET", "ajax_sample.txt", true);

                        console.log("ReadyState: ", xhr.readyState);

                        // Optional - used for loaders
                        /*
                        xhr.onprogress = function(){
                                console.log("ReadyState: ", xhr.readyState);
                        }
                        */


                        xhr.onload = function(){
                                console.log("ReadyState: ", xhr.readyState);
                                if(this.status == 200){
                                        // console.log(this.responseText);
                                        document.getElementById("text").innerHTML = this.responseText;
                                }else if(this.status == 404){
                                        document.getElementById("text").innerHTML = "Not Found !!!";
                                }
                        }



                        xhr.onreadystatechange = function(){
                                console.log("ReadyState: ", xhr.readyState);
                                if(this.readyState == 4 && this.status == 200){
                                        // console.log(this.responseText);
                                }
                        }


                        xhr.onerror = function(){
                                console.log("Request Error ................");
                        }





                        // Sends request
                        xhr.send();
                }


                // Http Request
                /*
                200 = "OK"
                403 = "Forbidden"
                404 = "Not Found"
                */

                // readyState Values
                /*
                0:      requst not initialized
                1:      server connection established
                2:      request received
                3:      processing request
                4:      request finished and response is ready
                */

        </script>
</body>
</html>